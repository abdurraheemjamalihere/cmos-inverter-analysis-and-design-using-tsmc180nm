# cmos-inverter-analysis-and-design-using-tsmc180nm

The aim of this project is to familiarize users with operating the LTspice tool and experimenting with the functioning of a CMOS inverter, evaluating various parameters of it. The project operates upon TSMC180nm's model file and initiates by running MOSFET models. The aim here is to understand various plots and derive relevant parameters regarding MOSFETs. Following this, the project progresses to running a CMOS inverter, and here, it tries to derive relevant plots and derive relevant parameters regarding its functionality.

# 1. MOSFET Models Analysis

# 1.1 NMOS Analysis

In this section, I start with the analysis of MOSFET models present in tsmc180nm. Here, VDD=1.8V and L=180nm as in the case of digital circuits Length can be taken as a minimum, and width is generally taken greater than or equal to 1.5 times of the length. So, first I am plotting Id vs VGS curve, and here is the LT-spice setup for the same.
<img width="1394" height="686" alt="Screenshot 2025-08-05 223522" src="https://github.com/user-attachments/assets/3f03b164-98e2-4182-9643-17a1b56b17fa" />
The graph of Id versus VGS is generated by sweeping VGS from 0 to 1.8V for various VDS values. Use the commands indicated in the schematic to perform this sweep.
<img width="1919" height="836" alt="Screenshot 2025-08-05 223650" src="https://github.com/user-attachments/assets/1ee4ab38-82c1-49ca-b925-63c621fedd5a" />
This indicates that the threshold voltage lies between 600 mV and 700 mV, but we will also calculate it using the simulation setup. Additionally, from this curve, we can extract the transconductance (gm) curve for the NMOS by modifying the waveform viewer command in LTspice to d(Id(M1)). The deriv() function computes the derivative with respect to the independent variable in the current simulation. According to the definition of gm, it is given by dId/dVGS.
<img width="1919" height="833" alt="Screenshot 2025-08-05 223843" src="https://github.com/user-attachments/assets/927a454b-4464-4af7-8a8e-ba02a48fc5a4" />
Next, I am plotting the Id versus VDS curve, and the LTspice setup for this is shown below.
<img width="1341" height="642" alt="Screenshot 2025-08-05 224318" src="https://github.com/user-attachments/assets/e9fa6010-c9fa-4056-8947-1ae72d939160" />
The curve is plotted between Id and VDS by sweeping VDS from 0 to 1.8 V for different values of VGS. Use the commands provided in the schematic to perform this sweep. From this curve, we can also extract ro_nmos for the NMOS by modifying the waveform viewer command in LTspice to d(Id(M1)). The deriv() function computes the derivative with respect to the independent variable in the current simulation. According to the definition of ro, it is given by dId/dVDS. Now, we will proceed to calculate the threshold voltage (Vtn) for the NMOS, and the corresponding LTspice setup is shown below.
<img width="1145" height="640" alt="Screenshot 2025-08-05 224441" src="https://github.com/user-attachments/assets/6c6d65eb-1df4-4f08-be88-cf7b12a1f06b" />
Here, we assume a reasonable value of VGS (greater than Vtn), and we will determine the threshold voltage (Vtn) using the SPICE error log. In this setup, the transistor width is taken as 0.36 µm. To view the SPICE error log in LTspice, press Ctrl + L, where you can find the extracted value of Vtn.
<img width="276" height="345" alt="Screenshot 2025-08-05 224603" src="https://github.com/user-attachments/assets/bccd6fa7-ddc7-431f-a3a5-5992987c2576" />
Thus, we now have all the key values required. A similar procedure can be followed for a PMOS as well.
<img width="1282" height="675" alt="Screenshot 2025-08-05 225219" src="https://github.com/user-attachments/assets/aec87496-f780-49bb-bef3-6b9e72591f1c" />
The objective remains the same, with a particular focus on determining the aspect ratio at which both NMOS and PMOS produce equal current. Through experimentation, I observed that setting the W/L of the PMOS to four times that of the NMOS yields closely matching current values. Specifically, the NMOS produced a current of 9.1 µA, while the PMOS delivered 9.5 µA at |VGS| = 0.65 V — not bad!

# 1.2 SREONG 0 AND WEAK 1

What does this imply? Refer to the schematic and waveforms below for a clearer understanding.
<img width="1488" height="684" alt="Screenshot 2025-08-05 230156" src="https://github.com/user-attachments/assets/22f4f753-05fe-4a6e-9548-8aba545bdf9b" />
<img width="1915" height="800" alt="Screenshot 2025-08-05 230307" src="https://github.com/user-attachments/assets/17408cf2-f645-4017-ba98-68fbcc705196" />
From the waveform, we observe that when a square wave is applied to the input of the NMOS, the output behaves as follows: when the input is at logic LOW (0 V), the output rises to logic HIGH (1.8 V). However, when the input is at logic HIGH (1.8 V), the output does not fall to 0 V but instead remains at a voltage significantly above 0 V. This happens because with VGS = 1.8 V, the NMOS operates in the linear (triode) region, where it behaves like a voltage-controlled resistor. In this region, the output is part of a voltage divider formed by the MOSFET's channel resistance. As a result, the output voltage depends on this resistance and doesn't drop fully to 0 V. Therefore, an NMOS is capable of transmitting a strong 0, but not a strong 1.

# 1.3 STRONG 1 AND WEAK 0

Here as well, let's examine some schematics and corresponding waveforms in LTspice to better understand the behavior.
<img width="1318" height="667" alt="Screenshot 2025-08-05 231037" src="https://github.com/user-attachments/assets/2f2f37db-4fff-4815-8f7c-461cde7d3f7f" />
<img width="1913" height="795" alt="Screenshot 2025-08-05 231106" src="https://github.com/user-attachments/assets/bfd68136-f710-4bed-80ab-6add5b382db5" />
Hence, neither NMOS nor PMOS alone functions effectively as an inverter. Several configurations were explored, but the most widely adopted and efficient design using MOSFETs is the CMOS configuration.

# 2. CMOS INVERTER

# 2.1 Why CMOS Circuits?

In the previous section, we observed that neither NMOS nor PMOS alone can reliably produce both HIGH and LOW logic levels. However, they exhibit complementary characteristics. This observation inspired the idea of combining them: placing the PMOS (a strong pull-up device) between VDD and Vout, and the NMOS (a strong pull-down device) between Vout and ground. In this configuration, each transistor acts as a load for the other, and ideally, they are never ON at the same time — or are they? This elegant arrangement forms the basis of the Complementary Metal-Oxide-Semiconductor (CMOS) configuration, with its simplest and most fundamental implementation being the CMOS inverter.
<img width="1160" height="466" alt="Screenshot 2025-08-05 235930" src="https://github.com/user-attachments/assets/4c21b684-dc4b-44cc-bc66-e52c89619296" />
CMOS circuits are generally structured into two distinct sections: the pull-up network (upper half) and the pull-down network (lower half). The pull-up network consists of P-channel MOSFETs, while the pull-down network uses N-channel MOSFETs. The logic behind this design is simple — when one network is active (ON), the other is inactive (OFF). This complementary behavior prevents the formation of a continuous resistive path from VDD to GND, thereby minimizing voltage division (if any occurs, it is negligible). As a result, the circuit can efficiently produce both strong HIGH and strong LOW outputs. The pull-up network ensures a low-resistance path to VDD, and the pull-down network provides a low-resistance path to GND.
<img width="780" height="575" alt="Screenshot 2025-08-06 001600" src="https://github.com/user-attachments/assets/1e6721dd-6fb3-45a7-9e25-faf449901443" />

# 2.2 CMOS Inverter Design and Analysis using LT-Spice

Before proceeding further, let’s first understand what an inverter is. In simple terms, an inverter is a circuit that performs the NOT operation — it flips the input logic level. Practically, an inverter is evaluated based on key parameters such as noise margin and speed.

In this context, I have designed an inverter in LTspice. Based on our previous calculation — where the PMOS width was chosen to be four times that of the NMOS — I have used W_NMOS = 0.36 µm and W_PMOS = 1.44 µm. Below is the corresponding schematic in LTspice.
<img width="1464" height="742" alt="Screenshot 2025-08-05 232004" src="https://github.com/user-attachments/assets/45ac6775-d98d-4aa4-a48b-6fc5fe0721c1" />

# 2.2.1 DC Analysis and Important Design Parameters

Next, we will plot the Voltage Transfer Characteristics (VTC) curve of the inverter using a DC analysis. In this simulation, the input voltage (Vin) is swept from 0 V to 1.8 V, and we observe both Vin and Vout.
The following command is used for this sweep:
.dc Vin 0 1.8 1m
Below is the resulting waveform:
<img width="1916" height="796" alt="Screenshot 2025-08-05 232256" src="https://github.com/user-attachments/assets/50938da5-d154-4789-ac08-e1cc989301c7" />
From the VTC curve, we observe that Vin = Vout at approximately 0.903 V, which is close to VDD/2. This point is known as the switching threshold of the inverter — a key characteristic we will discuss in more detail later.
Now, let’s explore what other important parameters can be derived from this curve:
<img width="836" height="516" alt="Screenshot 2025-08-06 001656" src="https://github.com/user-attachments/assets/3a2be105-9978-4a89-b7ff-a34a1f6956b2" />
From the above figure, we can observe that the inverter operates across five distinct regions. These regions help us understand the behavior of the inverter under different input conditions. Also, refer to the image below for a clearer illustration of these regions:
<img width="1153" height="754" alt="Screenshot 2025-08-06 001836" src="https://github.com/user-attachments/assets/6da86fb1-077c-4e6c-92d0-3d067ead978e" />

Let us now understand the key parameters of an inverter, which are derived from its Voltage Transfer Characteristic (VTC) curve:
VOH: Maximum output voltage when the output is at logic ‘1’.
VOL: Minimum output voltage when the output is at logic ‘0’.
VIH: Maximum input voltage that is still interpreted as logic ‘0’.
VIL: Minimum input voltage that is interpreted as logic ‘1’.
Vth: Inverter threshold voltage (also called switching threshold), which we previously calculated to be approximately 0.903 V from the VTC curve.

These five parameters are crucial for evaluating inverter performance and can all be observed directly from the VTC plot.
⚠️ Note: For optimal noise margins, the inverter's Vth should ideally be at VDD/2.
To precisely determine these parameters in LTspice, you can utilize the condition where the slope of the VTC curve is –1, i.e., when d(Vout)/d(Vin) = –1.

This can be done by:
Plotting Vout versus Vin,
Applying the deriv() function to calculate the derivative,
Using a marker at the point where the slope equals –1 to extract values for VIL, VIH, VOH, VOL, and Vth.

<img width="1912" height="797" alt="Screenshot 2025-08-05 232539" src="https://github.com/user-attachments/assets/d8c0538f-f255-439a-9e1e-bb7293cc9256" />








